"use strict";var Profile={init:function(){Profile.main()},main:function(){App.loadDatePicker(".date-picker"),$(document).on("click","#update-avatar",function(){Profile.avatar()}),$(document).on("submit","form",function(){var a=$(this).find(".submit").val();return Profile.submitForm($(this),a),!1})},avatar:function(a){var t=App.loadModal("lg"),e=t.find(".modal-body");t.find(".modal-title").text("Update Avatar"),App.blockElement($(e)),App.ajax(App.baseUrl("profile/loadAvatarForm"),"get","html").error(function(a){t.find(".close").click()}).done(function(a){App.unblockElement($(e)),e.html(a),Avatar.init()})},submitForm:function(a,t){var e=a.find(".submit");if(a.valid()){var o=App.baseUrl("profile/update");"update-password"==e.val()&&(o=App.baseUrl("profile/updatePassword")),App.blockElement(a.parent()),e.attr("disabled",!0),App.ajax(o,"post","json",App.serializeForm(a)).error(function(t){App.unblockElement(a.parent()),e.attr("disabled",!1)}).done(function(t){console.log(t),t.status?($("#profile-main").load(location.href+" #profile-main>*",""),$(".s-profile").load(location.href+" .s-profile>*",""),App.loadDatePicker(".date-picker"),swal(t.action,t.message,"success")):swal({title:t.action,text:t.message,type:"error",html:!0}),e.attr("disabled",!1),App.unblockElement(a.parent())})}}};